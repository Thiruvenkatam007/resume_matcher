# Resume Matcher

## Overview

https://github.com/user-attachments/assets/be4fa854-57ba-4e9b-bb04-dde2e128fff3



The Resume Matcher is a tool designed to evaluate resumes against a job description (JD) and generate a report that includes a match score and other relevant details. The tool uses a combination of natural language processing (NLP) and machine learning (ML) techniques to analyze the resumes and provide a comprehensive evaluation.

## Files

### 1. `langraph_agent.py`

This file contains the core logic for processing resumes using a LangGraph pipeline. The pipeline consists of several nodes that handle different stages of the resume processing workflow.

#### Graph State

The `ResumeState` class is a TypedDict that defines the state of the graph. It includes fields for the job description, resume path, resume text, LLM (Language Learning Model), raw LLM output, parsed JSON, report, and errors.

#### Graph Nodes

The file includes several nodes that are used in the LangGraph pipeline:

- `node_load_resume`: This node loads the resume text from the specified path.
- `node_call_llm`: This node calls the LLM to generate a structured output based on the job description and resume text.
- `node_build_report`: This node builds the final report based on the parsed JSON output from the LLM.
- `node_save_report`: This node saves the report to a JSON file.

#### Graph Builder

The `build_resume_graph` function builds the LangGraph pipeline for processing a single resume. The pipeline consists of the following nodes:

1. `load_resume`: Loads the resume text.
2. `call_llm`: Calls the LLM to generate a structured output.
3. `build_report`: Builds the final report.
4. `save_report`: Saves the report to a JSON file.

#### Single-run Helper

The `run_single_resume_with_graph` function invokes the compiled LangGraph workflow for a single resume. It returns the final report dict or None on failure.

### 2. `main_processor.py`

This file contains the main processing logic for the Resume Matcher tool. It includes a function `process_all` that processes all resumes in a specified folder and generates reports for each resume.

#### `process_all` Function

The `process_all` function takes the following parameters:

- `job_description_file`: The path to the job description file.
- `resumes_folder`: The path to the folder containing the resumes.
- `workers`: The number of parallel workers to use for processing the resumes.
- `model`: The LLM model to use for generating the structured output.
- `topk`: The number of top resumes to evaluate.
- `topk_frac`: The fraction of resumes to consider if `topk` is not set.

The function performs the following steps:

1. Loads the job description from the specified file.
2. Gathers the candidate files from the specified folder.
3. Pre-loads the resume texts for embedding prefiltering.
4. Pre-filters the resumes using embeddings to select the top resumes.
5. Processes the selected resumes using a thread pool, with each thread calling the LangGraph workflow.
6. Logs the number of reports written to the reports directory.

### 3. `app.py`

This file contains the Streamlit application for the Resume Matcher tool. It provides a user interface for uploading job descriptions and resumes, setting parameters, and running the resume matching process.

#### Configuration

The file includes configuration variables for the base directory, default job description file, default resumes directory, reports directory, and uploads directory.

#### Helpers

The file includes helper functions for clearing a folder, loading reports from the reports directory, and processing all resumes.

#### Streamlit App

The `main` function sets up the Streamlit application and includes the following components:

- Upload Job Description: Allows the user to upload a job description file.
- Upload Resumes: Allows the user to upload one or more resumes.
- Parameters: Allows the user to set parameters for the resume matching process, including the number of parallel workers, the number of top resumes to evaluate, the fraction of resumes to consider, and the LLM model to use.
- Run Resume Matching: Runs the resume matching process and displays the results.
- Download Reports: Allows the user to download the reports generated by the resume matching process.

### 4. `utils.py`

This file contains utility functions and classes used by the Resume Matcher tool. It includes functions for loading job descriptions, loading resumes, embedding text, pre-filtering resumes, and calling the LLM.

#### Logging

The file includes logging configuration for the Resume Matcher tool.

#### IO Helpers

The file includes functions for loading job descriptions and resumes. The `load_yaml_job_description` function loads a job description from a YAML file, while the `load_resume_markdown` function loads a resume and returns the text as Markdown.

#### Pydantic Schema

The file includes a Pydantic schema for the structured output generated by the LLM. The `MatchReport` class defines the fields and constraints for the structured output.

#### Prompt

The file includes a prompt template for generating the structured output using the LLM. The `PROMPT` variable is a `ChatPromptTemplate` that includes the system message, user message, and schema for the structured output.

#### Embeddings

The file includes functions for embedding text and pre-filtering resumes using embeddings. The `_cosine` function calculates the cosine similarity between two vectors, while the `get_embedder` function returns the embedder used for embedding text. The `embed_text` function embeds a text string, while the `prefilter_resumes` function pre-filters resumes using embeddings to select the top resumes.

#### LLM Client

The file includes a function for creating an LLM client. The `make_llm` function creates an LLM client with the specified model and temperature.

#### Retry Wrapper

The file includes a retry wrapper for calling the LLM. The `call_llm_structured` function calls the LLM with the specified job description and resume text, and retries the call if an exception occurs.

#### Per-resume Processing

The file includes a function for cleaning text. The `clean_text_v2` function extracts the first valid JSON object or array from arbitrary text.

### 5. `requirements.txt`

This file lists the Python packages required by the Resume Matcher tool. It includes packages for Streamlit, LangGraph, LangChain, Pydantic, Backoff, NumPy, PyYAML, Sentence Transformers, Transformers, Torch, Scikit-learn, SciPy, NLTK, Tqdm, Regex, Filelock, Hugging Face Hub, and Tokenizers.

## Logic

The Resume Matcher tool uses a combination of NLP and ML techniques to analyze resumes and generate a match score and other relevant details. The tool includes the following steps:

1. Load the job description from a YAML file.
2. Gather the candidate files from a specified folder.
3. Pre-load the resume texts for embedding prefiltering.
4. Pre-filter the resumes using embeddings to select the top resumes.
5. Process the selected resumes using a thread pool, with each thread calling the LangGraph workflow.
6. Generate a report for each resume, including a match score and other relevant details.
7. Save the reports to JSON files.
8. Display the reports in a user interface, allowing the user to download the reports.

## Usage

To use the Resume Matcher tool, follow these steps:

1. Install the required Python packages using the `requirements.txt` file.
2. Run the Streamlit application using the `app.py` file.
3. Upload a job description file and one or more resumes.
4. Set the parameters for the resume matching process.
5. Run the resume matching process.
6. Download the reports generated by the resume matching process.

## Conclusion

The Resume Matcher tool provides a comprehensive solution for evaluating resumes against a job description and generating a match score and other relevant details. The tool uses a combination of NLP and ML techniques to analyze resumes and provide a detailed evaluation. The Streamlit application provides a user-friendly interface for uploading job descriptions and resumes, setting parameters, and running the resume matching process. The tool is designed to be flexible and customizable, allowing users to adapt it to their specific needs and requirements.
